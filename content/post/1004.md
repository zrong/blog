+++
title = "抛弃Windows，用Ubuntu办公-3.输入法"
postid = 1004
date = 2010-05-10T14:08:13+08:00
isCJKLanguage = true
toc = false
type = "post"
slug = "1004"
aliases = [ "/post/1004.html",]
category = [ "use",]
tag = [ "ime", "linux", "ubuntu", "byewindows",]
+++


系列全部文章：[抛弃Windows，用Ubuntu办公](https://blog.zengrong.net/tag/byewindows/)

Ubuntu安装成功后，我的第一步就是安装输入法。毕竟没有输入法就不能打汉字，碰到问题都没得搜索。 Ubuntu 10.04自带的ibus我觉得太慢，因此还是安装fcitx比较好。fcitx的速度的确是快，但在配置的便捷上来讲，和搜狗还是有一点点距离的，如果能在自定义短语功能上再加强点就好了。  

安装的过程就不说了，网上有很多的教程可以搜到，我这里讲讲我配置的经验。  
<!--more-->  

fcitx在源里是有的，可以直接使用下面的代码安装：

```
sudo apt-get install fcitx
```

但是，源里面的版本比较老（例如10.04里面是3.6.2,而最新版本为3.6.3），如果需要最新版本，在googlecode（<http://code.google.com/p/fcitx/>）上也有deb包下载，不喜欢GB编码的童鞋还可以下载utf8版本。  

那么，在源里面安装和使用下载的deb包安装的版本有什么不同呢？主要是源里面安装的版本会在“\~”下面创建“.fictx”目录，将配置文件和用户词库都保存在其中，而deb安装的则不会创建这个目录。因此，如果你安装的是deb包，又按照网上的许多教程所说的去寻找.fictx目录下面的config文件进行编辑的话，就要失望了 :em31:  

下面说说我摸索的一些经验教训：  

1.编辑config，如果使用的deb安装包，需要编辑/usr/share/fcitx/data/confg，如果是源自带的fcitx，则编辑.fcitx/config；  

2.如果安装的不是UTF8版本的fcitx，则使用Ubuntu自带的gedit编辑器配置文件的时候可能会显示乱码。解决乱码的方法可放狗搜索。我则是安装了一款支持自动识别编码的编辑器leafpad解决。这款编辑器轻便小巧，启动快速，我已经用它作为我的默认文本编辑器了;  

3.关于显示字体为方框的问题，配置文件中的字体设置就可以了，如下：

    [程序]
    显示字体(中)=Microsoft YaHei
    显示字体(英)=Courier New

4.对于一个只会拼音的人来说，多余的输入法都不需要载入。将“其他输入法”留空，并取消区位和码表输入法。同时，我把输入法名称改成了自己喜欢的样子。  

另外，我本来习惯使用微软拼音的双拼方案，但是由于微软双拼将分号键定义为韵母ing，而fcitx需要分号键来作为快速输入功能的开启键，这之间有冲突。因此就退而使用自然码的双拼方案了。（这个问题还是纠结了很长时间才解决的，开始我一直认为是fcitx的帮助文档写错了，要不然为什么我的设置完全正确，却无法使用快速输入呢 :em14: ）  

双拼方案的名称，可以打开/usr/share/fcitx/data/sp.dat查看。

    [输入法]
    使用拼音=1
    拼音名称=拼音
    使用双拼=1
    双拼名称=双拼
    默认双拼方案=自然码
    使用区位=0
    区位名称=区位
    使用码表=0
    提示词库中的词组=1
    其他输入法=

5.热键部分的设置，我习惯使用逗号和句号翻页，使用CTRL切换中英文，使用左右SHIFT选择第二三候选字。那么进行如下设置即可（只有修改的部分）：  

需要注意的是，虽然配置文件的注释中说

> \# 除了“中英文快速切换键”外，其它的热键均可设置为两个，中间用空格分隔

但是，对于“第二三候选词选择键”，必须设置为SHIFT，如果设置为 `L_SHIFT R_SHIFT` ，是无效的。

    [热键]
    中英文快速切换键=L_CTRL
    上一页=,
    下一页=.
    第二三候选词选择键=SHIFT

6.通过编辑QuickPhrase.mb，可以得到类似于搜狗中自定义短语的效果。不过这里的自定义短语必须在使用分号开启快速输入后才会显示。不知道如何能象搜狗一样直接显示呢？  

在定义快速输入的时候，还要注意的一点是，数字不能是自定义短语的最后一个字符。当时我有个地址短语最后是使用邮编结尾的，就导致fcitx出错，无论如何也无法启动了，我换了十几个版本才发现，原来问题出在这里。  

7.标点符号定义改punc.mb，成组的符号定义改pySym.mb，要备份输入过的用户词库可以备份.fcitx下面的“pyindex.dat”和“pyusrphrase.mb”（五笔用户可能名称会不同）。  

8.修改了配置和添加了快速输入短语后，在fcitx输入框显示的前提下，按Ctrl+5就可以重新载入设置了。当然，也可以更加暴力一点，使用下面的方法：

    sudo killall fcitx

然后再执行：

    fcitx
